# ts_crutch
Костыль для запуска TS-ки под линуксом. 
# Как это использовать
1. Билдим:
```
g++ main.cc -lX11 -o ts_crutch
```
2. Запускаем TypeStats:
```
LANG=ru_RU wine ./TypeStats.exe
```
3. Запускаем костыль:
```
sudo ./ts_crutch
```
4. Печатаем в любом окне что угодно. Переключаемся в TS и видим захваченные нажатия!
5. Закрыть костыль - `Ctrl+C`
# Как это работает
 ts_crutch читает нажатия напрямую из файла устройства клавиатуры (поэтому нужно sudo) и отправляет X-события в окно TypeStats. Как ни странно, этого достаточно. 
 Запускать непонятные кейлоггеры под `sudo` - занятие крайне сомнительное, ознакомьтесь с исходниками, прежде чем делать это.

 # Известные баги/недоработки

 - в TS не срабатывает кнопка "Переключить в текущую раскладку" пока не вырубишь костыль.
 - все нажатия клавиш будут отправляться в TS два раза, если она в фокусе, поэтому не получится написать нормальное имя файла, описание для сохранённой тэ-эски, пока не вырубишь костыль.
 - не определяется устройство клавиатуры, на самом деле. я захардкодкил свой сетяп. это не дело.
 - Нет мэйкфайла
 - выход по ctrl+c - позор и отстой
 - по хорошему надо находить все устройства клавиатур, чтобы можно было работать за нотником с внешней клавой, например
 - избавиться бы от sudo как-нибудь
